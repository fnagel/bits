(window.webpackJsonp=window.webpackJsonp||[]).push([[38],{397:function(e,t,o){"use strict";o.r(t);var n=o(45),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[o("h1",{attrs:{id:"lifecycle"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#lifecycle"}},[e._v("#")]),e._v(" Lifecycle")]),e._v(" "),o("p",[e._v("Lifecycle hooks allow you to perform certain actions at key points of the bit execution.\nThat makes it easy to bind your event listeners, modify the dom or clean up when the bit is destroyed.")]),e._v(" "),o("p",[e._v("In this example you can see how and when lifecycle hooks are emitted.")]),e._v(" "),o("Example",{attrs:{href:"/demo/examples/lifecycle.html",height:450}}),e._v(" "),o("h2",{attrs:{id:"bit-boot-up"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#bit-boot-up"}},[e._v("#")]),e._v(" Bit boot-up")]),e._v(" "),o("p",[e._v("The bit classes you write are no real web components, but instead only classes that are glued to a DOM node\nthrough the "),o("code",[e._v("b-mount")]),e._v(" tag. This means the boot process is handled by the mount in the following order:")]),e._v(" "),o("ul",[o("li",[e._v("Browser executes the connectedCallback() method on the mount element")]),e._v(" "),o("li",[e._v("The Mount.connect() method is executed by the adapter")]),e._v(" "),o("li",[e._v("Two possible cases can occur:\n"),o("ol",[o("li",[e._v("The bit class constructor gets resolved through the bit registry of the app.\n"),o("ul",[o("li",[e._v("The bit instance is created")]),e._v(" "),o("li",[e._v('"created" lifecycle hook is executed')]),e._v(" "),o("li",[e._v("The reactivity provider is bound to the instance")]),e._v(" "),o("li",[e._v("The instance gets connected to the DOM through the binder")]),e._v(" "),o("li",[e._v('The content of "innerHTML" of the mount node gets cloned and stored for the destruction')]),e._v(" "),o("li",[e._v('"mounted" lifecycle hook is executed')]),e._v(" "),o("li",[e._v('Static "autoRun" methods (decorated using @AutoRun) are executed')])])]),e._v(" "),o("li",[e._v('The mount node has the "keep-alive" attribute, and holds already existing bit instance.\n'),o("ul",[o("li",[e._v("The mount re-uses the already stored bit instance")]),e._v(" "),o("li",[e._v('"remounted" lifecycle hook is executed')])])])])])]),e._v(" "),o("p",[e._v('After this point your bit is considered "running" and can react to data-changes and DOM-events.')]),e._v(" "),o("h2",{attrs:{id:"bit-destruction"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#bit-destruction"}},[e._v("#")]),e._v(" Bit destruction")]),e._v(" "),o("ul",[o("li",[e._v("Browser executes the disconnectedCallback() method on the mount element")]),e._v(" "),o("li",[e._v("The Mount.disconnect() method is executed by the adapter")]),e._v(" "),o("li",[e._v('"unmounted" lifecycle hook is executed')]),e._v(" "),o("li",[e._v("Two possible cases can occur:\n"),o("ol",[o("li",[e._v("The "),o("code",[e._v("b-mount")]),e._v(' has the "keep-alive" attribute set to any value.\n'),o("ul",[o("li",[e._v("The bit instance and all dom bindings are kept alive and wait for a rebinding later.")])])]),e._v(" "),o("li",[e._v("The bit instance will be destroyed\n"),o("ul",[o("li",[e._v('"beforeDestroy" lifecycle hook is executed')]),e._v(" "),o("li",[e._v("The reactivity provider pulls down the data-binding")]),e._v(" "),o("li",[e._v("DOM-binding and event handlers are disconnected by the binder")]),e._v(" "),o("li",[e._v("The $proxy instance is destroyed and unlinks all dependencies.")]),e._v(" "),o("li",[e._v("The bit $context is destroyed")]),e._v(" "),o("li",[e._v('"destroyed" lifecycle hook is executed.')]),e._v(" "),o("li",[e._v('The "innerHTML" of the mount point will be reset\nto the original state we stored in the boot-up process.\n(We do this, so if the node is rebound, the instance will be bound to the original HTML without having to deal with a possibly modified DOM of previous incarnations).')])])])])])]),e._v(" "),o("p",[e._v("At this point all references to the outside world should be severed, and the\ninstance will be flushed by the garbage collector.")]),e._v(" "),o("h2",{attrs:{id:"dom-binding-and-keep-alive"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#dom-binding-and-keep-alive"}},[e._v("#")]),e._v(" DOM binding and keep-alive")]),e._v(" "),o("p",[e._v("By default, the bit instance is destroyed when the bound "),o("code",[e._v("b-mount")]),e._v(" was disconnected from the dom.\nThis happens if you either remove the node, "),o("strong",[e._v("OR EVEN")]),e._v(" if you "),o("strong",[e._v("move")]),e._v(" it to another location in the dom tree (using appendChild() for example).")]),e._v(" "),o("p",[e._v('If you know, that you want to reuse the bit after you moved it around,\nsimply add the "keep-alive" attribute with any content to the mount tag.\nThat ensures that the bit instance, and the innerHTML of the mount node stay alive\nuntil you rebind it again to the DOM.')]),e._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),o("p",[e._v("Make sure not to over-use this feature! Every bit kept-alive will hold on to its mount and child DOM nodes. Meaning neither the node, nor\nthe bit itself will be deleted by the garbage collector.")])]),e._v(" "),o("h2",{attrs:{id:"available-hooks"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#available-hooks"}},[e._v("#")]),e._v(" Available hooks")]),e._v(" "),o("p",[e._v("All lifecycle hook methods act as normal methods on your bit object. This means that the\nbit instance is already bound to the "),o("code",[e._v("this")]),e._v(' context. Please keep in mind, that there in "created"\nthe DOM is not yet bound, and in "destroyed" the instance is already destroyed, plus you don\'t have access to $el or the $context anymore.')]),e._v(" "),o("h3",{attrs:{id:"created"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#created"}},[e._v("#")]),e._v(" created")]),e._v(" "),o("p",[e._v("Executed immediately after the bit instance was created. There is no data reactivity or dom binding yet.\nI would suggest, to see this as your constructor, to set up dependencies that you need in your bit.")]),e._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),o("p",[e._v('While it is possible to override the constructor of the bit class, I would suggest not to do that. Please refer to the "created" hook instead.')])]),e._v(" "),o("h3",{attrs:{id:"mounted"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#mounted"}},[e._v("#")]),e._v(" mounted")]),e._v(" "),o("p",[e._v('This is probably your "go-to" lifecycle hook, as it is executed when the bit was connected to the DOM the '),o("strong",[e._v("first time")]),e._v(".\nAll data reactivity has been set up and statically defined event listeners have been bound.")]),e._v(" "),o("h3",{attrs:{id:"unmounted"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#unmounted"}},[e._v("#")]),e._v(" unmounted")]),e._v(" "),o("p",[e._v("The bit is technically still alive but was disconnected from the dom. You can use this hook to remove global event listeners,\nthat were not bound using the $on() method of your bit.")]),e._v(" "),o("h3",{attrs:{id:"remounted"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#remounted"}},[e._v("#")]),e._v(" remounted")]),e._v(" "),o("p",[e._v('Behaves exactly like "mounted" but with the exception, that the bit was already part of the DOM and got removed beforehand (keep-alive was used).')]),e._v(" "),o("h3",{attrs:{id:"beforedestroy"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#beforedestroy"}},[e._v("#")]),e._v(" beforeDestroy")]),e._v(" "),o("p",[e._v("The bit is about to be destroyed and already disconnected from the dom.\nThis allows you to pull-down any dependencies before all connections to the outside world are cut.")]),e._v(" "),o("h3",{attrs:{id:"destroyed"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#destroyed"}},[e._v("#")]),e._v(" destroyed")]),e._v(" "),o("p",[e._v("The data-binding and DOM connections are cut, the "),o("code",[e._v("$el")]),e._v(" as well as "),o("code",[e._v("$context")]),e._v(" and "),o("code",[e._v("$proxy")]),e._v(" are unlinked.\nThe content of the "),o("code",[e._v("b-mount")]),e._v(" has been restored to its initial state when the bit was created.")]),e._v(" "),o("h3",{attrs:{id:"domchanged"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#domchanged"}},[e._v("#")]),e._v(" domChanged")]),e._v(" "),o("p",[e._v('This is more or less a "pseudo" lifecycle hook, as it is not really part of the lifecycle but more of a\nwildcard event handler. It is executed if either the current, or a child bit executed the '),o("code",[e._v("$domChanged()")]),e._v(" method.\nThat will emit an event which bubbles up the DOM tree and tells all bits on the way that they should refresh\ntheir DOM bindings. This is used if you modify the dom manually/from an external source, and now want the bits to bind themselfs again.")])],1)}),[],!1,null,null,null);t.default=a.exports}}]);